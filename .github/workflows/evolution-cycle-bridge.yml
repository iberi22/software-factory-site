name: ðŸ“Š Evolution Cycle (Public Bridge)

on:
  schedule:
    # Runs every Monday at 9:00 UTC
    - cron: '0 9 * * 1'
  workflow_dispatch:
    inputs:
      week_offset:
        description: 'Weeks to look back (0=current, 1=last week)'
        required: false
        default: '1'

jobs:
  trigger-private-evolution:
    runs-on: ubuntu-latest
    steps:
      - name: ðŸ“Š Trigger Evolution Cycle in Private Repo
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.PRIVATE_REPO_PAT }}
          script: |
            console.log('ðŸš€ Triggering Evolution Cycle in private repo...');
            
            const owner = 'iberi22';
            const repo = 'software-factory';
            const week_offset = '${{ github.event.inputs.week_offset || '1' }}';
            
            await github.rest.actions.createWorkflowDispatch({
              owner,
              repo,
              workflow_id: 'evolution-cycle.yml',
              ref: 'main',
              inputs: {
                week_offset: week_offset,
                create_issue: 'true'
              }
            });
            
            console.log('âœ… Evolution Cycle triggered successfully');
